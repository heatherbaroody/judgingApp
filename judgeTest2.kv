#: import main main
#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton
#: import TextInput kivy.uix.textinput.TextInput


<CustButton@Button>:
    font_size: 32

<JudgeBoxLayout>:
    orientation: "vertical"
    score_input: entry
    bib_input: bibentry
    rider_input: add_rider_input
    rider_list: rider_list_view
    score_list: score_list_view
    spacing: 10
    Label:
        size_hint_y: None
        height: '20dp'
    BoxLayout:
        orientation: "horizontal"
        BoxLayout:
            orientation: "horizontal"
#            height: '200dp'
            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Rider List"
                    size_hint_y:10
                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: 10
                    TextInput:
                        id: add_rider_input
                    Button:
                        text: "+"
                        on_press: root.add_rider()
                        on_release: add_rider_input.text = ""

                ListView:
                    size_hint_y:65
                    id: rider_list_view
                    adapter:
                        ListAdapter(data=[], cls=main.RiderListButton)
                Button:
                    size_hint_y:10
                    text: "ADD"
                    on_press: root.add_bib()
            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Scores"
                    size_hint_y:10
                Button:
                    text: "EXPORT"
                    size_hint_y:10
                    on_release: root.export_list()
                ListView:
                    size_hint_y:65
                    id: score_list_view
                    adapter:
                        ListAdapter(data=[], cls=main.RiderListButton)
                Button:
                    size_hint_y:10
                    text: "SORT"
                    on_press: root.sort_list()
        GridLayout:
            height: '200dp'
            rows: 5
            padding: 10
            spacing: 10
        # Where input is displayed
            BoxLayout:
                Label:
                    text: "BIB #:"
                    font_size: 24
                    size_hint_x: 30
                Label:
                    id: bibentry
                    font_size: 32
                    multiline: False
                    size_hint_x: 20
                Label:
                    text: "SCORE" 
                    font_size: 24 
                    size_hint_x: 30 
                Label:
                    id: entry
                    font_size: 32
                    multiline: False
                    size_hint_x: 20
     
        # When buttons are pressed update the entry
            BoxLayout:
                spacing: 10
                CustButton:
                    text: "7"
                    on_press: entry.text += self.text
                CustButton:
                    text: "8"
                    on_press: entry.text += self.text
                CustButton:
                    text: "9"
                    on_press: entry.text += self.text
                CustButton:
                    # text: "<<" 
                    # on_press: entry.do_backspace(from_undo=False, mode='bkspc')
            BoxLayout:
                spacing: 10
                CustButton:
                    text: "4"
                    on_press: entry.text += self.text
                CustButton:
                    text: "5"
                    on_press: entry.text += self.text
                CustButton:
                    text: "6"
                    on_press: entry.text += self.text
                CustButton:
                    text: "AC"
                    on_press: entry.text = ""
         
            BoxLayout:
                spacing: 10
                CustButton:
                    text: "1"
                    on_press: entry.text += self.text
                CustButton:
                    text: "2"
                    on_press: entry.text += self.text
                CustButton:
                    text: "3"
                    on_press: entry.text += self.text
                CustButton:
                    text: "."
                    on_press: entry.text += self.text
     
            BoxLayout:
                spacing: 10
                CustButton:
                    text: "DEL"
                    on_press: root.delete_score()
                CustButton:
                    text: "0"
                    on_press: entry.text += self.text
                CustButton:
                    text: "SUBMIT"
                    on_press: root.submit_score()
                    on_release: entry.text = ""
                    on_release: bibentry.text = ""
        